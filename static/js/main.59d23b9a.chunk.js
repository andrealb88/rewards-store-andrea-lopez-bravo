(this["webpackJsonpstore-lopez-andrea"]=this["webpackJsonpstore-lopez-andrea"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(15),a=n.n(r),o=(n(20),n(21),n(22),n(0)),i=function(){return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)("img",{className:"img-header",src:"./images/header-x3.png",alt:"headphones"}),Object(o.jsx)("h1",{className:"title",children:"Electronics"})]})},l=(n(24),n(13)),u=n(3),j=function(e,t){var n=Object(c.useState)(1),s=Object(u.a)(n,2),r=s[0],a=s[1],o=Math.ceil(e.length/t);return{next:function(){a((function(e){return Math.min(e+1,o)}))},prev:function(){a((function(e){return Math.max(e-1,1)}))},currentData:function(){var n=(r-1)*t,c=n+t;return e.slice(n,c)},currentPage:r,maxPage:o}},d=s.a.createContext();function b(e){var t=e.children,n=Object(c.useState)({}),s=Object(u.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)(0),b=Object(u.a)(i,2),x=b[0],h=b[1],O=Object(c.useState)([]),m=Object(u.a)(O,2),f=m[0],p=m[1],g=Object(c.useState)({}),v=Object(u.a)(g,2),N=v[0],w=v[1],y=Object(c.useState)([]),C=Object(u.a)(y,2),k=C[0],P=C[1],S=j(f,16),H=j(k,16),L=f.length,z=k.length;return Object(o.jsx)(d.Provider,{value:{user:r,setUser:a,handlerAddPoint:function(e){var t=Object(l.a)({},r);t.points=r.points+e,a(t)},handlerSubtractPoint:function(e){var t=Object(l.a)({},r);t.points=r.points-e,a(t)},points:x,setPoints:h,products:f,setProducts:p,totalProducts:L,paginationList:S,reedemStatus:N,setReedemStatus:w,history:k,setHistory:P,paginationHistoryList:H,totalHistory:z},children:t})}n(25);var x=function(e){return Object(o.jsxs)("div",{className:"details flex-row ".concat(e.classContainer),children:[Object(o.jsx)("h5",{className:"normal-text center ".concat(e.classText),children:e.text}),Object(o.jsx)("img",{className:"center",src:"./images/coin.svg",alt:"icono"})]})},h=(n(26),n(7)),O=function(){return Object(o.jsxs)("ul",{className:"menu flex-row",children:[Object(o.jsx)("li",{className:"pink-line",children:Object(o.jsx)(h.b,{className:"normal-text",to:"/store-lopez-andrea/",children:"Home"})}),Object(o.jsx)("li",{className:"pink-line",children:Object(o.jsx)(h.b,{className:"normal-text",to:"/store-lopez-andrea/points",children:"Add points"})}),Object(o.jsx)("li",{className:"pink-line",children:Object(o.jsx)(h.b,{className:"normal-text",to:"/store-lopez-andrea/history",children:"History"})})]})},m=function(){var e=Object(c.useContext)(d).user;return Object(o.jsxs)("nav",{className:"nav flex-row",children:[Object(o.jsx)("div",{className:"container-logo",children:Object(o.jsx)("img",{src:"./images/aerolab-logo.svg",alt:"logo"})}),Object(o.jsxs)("div",{className:"user-points flex-row-center",children:[Object(o.jsxs)("div",{className:"second",children:[Object(o.jsxs)("div",{classname:"part-1",children:[" ",Object(o.jsx)("h3",{className:"username",children:e.name})]}),Object(o.jsx)("div",{classname:"part-2",children:Object(o.jsx)(x,{text:e.points})})]}),Object(o.jsx)(O,{})]})]})},f=n(4),p=n.n(f),g=n(6),v="https://coding-challenge-api.aerolab.co/",N={"Content-Type":"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTFkODgzMGMxZDFhNzAwMjE5ZjNjNDAiLCJpYXQiOjE2MjkzMjUzNjB9.HeH4l-c3cqHsv9KSBssO8DOMPIB1RTLaZw_1yHFQbmw")},w=function(){var e=Object(g.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(v+"user/me",{headers:N});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),y=(n(14),function(){var e=Object(c.useContext)(d),t=e.reedemStatus,n=e.setReedemStatus;return t.msg?Object(o.jsx)("div",{className:"modal center",children:Object(o.jsxs)("div",{className:"container-msj flex-column ".concat(t.status?"success":"error"),children:[Object(o.jsx)("div",{children:Object(o.jsx)("img",{className:"image-ok-error",alt:"close",src:t.status?"./images/success.svg":"./images/error.png"})}),Object(o.jsx)("h4",{className:"text10",children:t.msg}),Object(o.jsx)("button",{className:"button-ok-error",onClick:function(){return n({})},children:t.status?"continue":"try again"})]})}):null}),C=n(2),k=(n(28),n(29),function(e){return Object(o.jsx)("button",{className:"btn-filter flex-row center ".concat(e.classbutton),onClick:e.handlerOnClick,children:Object(o.jsx)("h5",{className:"normal-text center text-full ".concat(e.classtext),children:e.text})})}),P=(n(30),function(e){return Object(o.jsxs)("div",{className:"flex-row btn-arrow center",children:[e.list.currentPage>1?Object(o.jsx)("button",{onClick:function(){return e.list.prev()},className:"container-arrow",children:Object(o.jsx)("img",{src:"./images/arrow-left.svg",alt:"flecha"})}):null,e.list.currentPage!==e.list.maxPage?Object(o.jsx)("button",{onClick:function(){return e.list.next()},className:"container-arrow",children:Object(o.jsx)("img",{src:"./images/arrow-right.svg",alt:"flecha"})}):null]})}),S=n(10),H=function(){var e=Object(g.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(v+"products",{headers:N});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(c.useContext)(d),t=e.totalProducts,n=e.user,s=e.setProducts,r=e.paginationList,a=e.products;return Object(o.jsxs)("aside",{className:"filter flex-row",children:[Object(o.jsx)("div",{className:"container-page center",children:Object(o.jsxs)("h3",{className:"normal-text",children:[r.currentData().length," of ",t," products"]})}),Object(o.jsx)(P,{list:r}),Object(o.jsxs)("div",{className:"container-filter flex-row",children:[Object(o.jsx)("div",{className:"container-sort",children:Object(o.jsx)("h3",{className:"normal-text",children:"Sort by:"})}),Object(o.jsxs)("div",{className:"container-btn flex-row",children:[Object(o.jsxs)("div",{className:"flex-row container-btn-filter",children:[Object(o.jsx)(k,{text:"Lowest price",handlerOnClick:function(){var e=function(e){var t=e.sort((function(e,t){return e.cost>t.cost?1:e.cost<t.cost?-1:0}));return Object(S.a)(t)}(a);s(e)}}),Object(o.jsx)(k,{text:"Highest price",handlerOnClick:function(){var e=function(e){var t=e.sort((function(e,t){return e.cost>t.cost?-1:e.cost<t.cost?1:0}));return Object(S.a)(t)}(a);s(e)}})]}),Object(o.jsxs)("div",{className:"flex-row container-btn-filter",children:[Object(o.jsx)(k,{text:"Availability",handlerOnClick:function(){var e=function(e,t){return Object(S.a)(e).filter((function(e){return e.cost<t.points}))}(a,n);s(e)}}),Object(o.jsx)(k,{text:"Clear sort",handlerOnClick:function(){H().then((function(e){return s(e)}))},classbutton:"pink",classtext:"text-white"})]})]})]})]})},z=(n(31),n(12),function(){var e=Object(g.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={productId:t},e.next=4,fetch(v+"redeem",{method:"POST",headers:N,body:JSON.stringify(n)});case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),D=function(e){var t=Object(c.useContext)(d),n=t.handlerSubtractPoint,s=t.setReedemStatus;return Object(o.jsxs)("div",{className:"selected-product flex-column",children:[Object(o.jsx)("div",{className:"container-buy-white",children:Object(o.jsx)("img",{src:"./images/buy-white.svg",alt:"bag"})}),Object(o.jsxs)("div",{className:"flex-row center",children:[Object(o.jsx)("h3",{className:"text-product-point",children:e.points}),Object(o.jsx)("img",{className:"white-bag",src:"./images/coin.svg",alt:"coin"})]}),Object(o.jsx)(k,{text:"Redeem now",handlerOnClick:function(){z(e.id).then((function(t){if(n(e.points),!t.ok)throw Error(t.status);return t.json()})).then((function(e){s({status:!0,msg:e.message})})).catch((function(e){s({status:!1,msg:"ups hubo un error"}),console.log(e)}))}})]})},M=function(e){var t=Object(c.useContext)(d).user,n=Object(c.useState)(!1),s=Object(u.a)(n,2),r=s[0],a=s[1],i=function(){a(!r)},l=e.points-t.points;return Object(o.jsxs)("div",{className:"product flex-column center",onMouseEnter:i,onMouseLeave:i,children:[Object(o.jsxs)("div",{className:"container-position",children:[Object(o.jsxs)("div",{className:"product-container",children:[Object(o.jsx)("img",{className:"photo",src:e.url,alt:"producto"}),t.points<e.points?Object(o.jsx)(x,{classContainer:"btn-neededPoints top-icono center",classText:"text-neededPoints",text:"You need ".concat(l)}):Object(o.jsx)("div",{className:"top-icono blue-bag",children:Object(o.jsx)("img",{src:"./images/buy-blue.svg",alt:"bag"})})]}),Object(o.jsxs)("div",{className:"container-description flex-column",children:[Object(o.jsx)("h4",{className:"product-name",children:e.name}),Object(o.jsx)("h4",{className:"product-category",children:e.category})]})]}),t.points>e.points&&r?Object(o.jsx)(D,{points:e.points,id:e.id}):null]})},I=function(){var e=Object(c.useContext)(d).paginationList;return Object(o.jsx)("main",{className:"result flex-row",children:e.currentData().length>0?e.currentData().map((function(e){return Object(o.jsx)(M,{id:e._id,url:e.img.hdUrl,name:e.name,category:e.category,points:e.cost},e._id)})):null})},E=function(e){return Object(o.jsxs)("footer",{className:"footer flex-row",children:[Object(o.jsxs)("h3",{className:"normal-text",children:[e.list.currentData().length," of ",e.totalList," products"]}),Object(o.jsx)(P,{list:e.list})]})},A=function(){var e=Object(c.useContext)(d),t=e.totalProducts,n=e.paginationList,s=e.setProducts;return Object(c.useEffect)((function(){H().then((function(e){s(e),console.log(),console.log("Home side effect")}))}),[s]),console.log(),console.log("render Home"),Object(o.jsxs)("section",{className:"section",children:[Object(o.jsx)(L,{}),Object(o.jsx)(I,{}),Object(o.jsx)(E,{list:n,totalList:t})]})},F=function(e){return Object(o.jsxs)("div",{className:"flex-row small-container",children:[Object(o.jsx)("div",{className:"container-imgHistory",children:Object(o.jsx)("img",{className:"h100",src:e.url,alt:"producto"})}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("h3",{className:"small-text",children:["Category: ",e.category]}),Object(o.jsxs)("h3",{className:"small-text",children:["Cost: ",e.cost]}),Object(o.jsxs)("h3",{className:"small-text",children:["Date: ",e.date]})]})]})},J=(n(32),function(e){return Object(o.jsx)("div",{className:"container-title center",children:Object(o.jsx)("h3",{className:"title",children:e.title})})}),T=function(){var e=Object(g.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(v+"user/history",{headers:N});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(c.useContext)(d),t=e.paginationHistoryList,n=e.setHistory,s=e.totalHistory;return Object(c.useEffect)((function(){T().then((function(e){n(e)}))}),[n]),Object(o.jsxs)("section",{className:"section",children:[Object(o.jsx)(J,{title:"Get user redeem history"}),t.currentData().map((function(e){return Object(o.jsx)(F,{url:e.img.url,category:e.category,cost:e.cost,date:e.createDate},e.createDate)})),Object(o.jsx)(E,{list:t,totalList:s})]})},R=(n(33),function(){var e=Object(g.a)(p.a.mark((function e(t){var n,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={amount:t},e.prev=1,e.next=4,fetch(v+"user/points",{method:"POST",headers:N,body:JSON.stringify(n)});case 4:return c=e.sent,e.next=7,c.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()),U=function(e){var t=Object(c.useContext)(d),n=t.points,s=t.handlerAddPoint,r=t.setProducts;return Object(o.jsx)("div",{className:"container-selector flex-row center",children:Object(o.jsx)("button",{value:n,onClick:function(){return t=e.value,R(t).then((function(e){s(t),alert(e.message)})),void H().then((function(e){r(e)}));var t},className:"selector normal-text",children:e.description})})},G=function(){return Object(o.jsxs)("section",{className:"section",children:[Object(o.jsx)(J,{title:"Add points to your user"}),Object(o.jsxs)("div",{className:"center flex-column",children:[Object(o.jsx)(U,{description:"add 1000 points",value:1e3}),Object(o.jsx)(U,{description:"add 5000 points",value:5e3}),Object(o.jsx)(U,{description:"add 7500 points",value:7500})]})]})},Q=function(){return Object(o.jsx)("div",{className:"modal center bg-green",children:Object(o.jsx)("img",{src:"./images/404-Page-Not-Found-Error.png",alt:"error"})})},Z=function(){return Object(o.jsxs)(C.c,{children:[Object(o.jsx)(C.a,{path:"*",element:Object(o.jsx)(A,{})}),Object(o.jsx)(C.a,{path:"store-lopez-andrea/history",element:Object(o.jsx)(B,{})}),Object(o.jsx)(C.a,{path:"store-lopez-andrea/points",element:Object(o.jsx)(G,{})}),Object(o.jsx)(C.a,{path:"store-lopez-andrea/NotFound",element:Object(o.jsx)(Q,{})})]})};var _=function(){var e=Object(c.useContext)(d).setUser;return Object(c.useEffect)((function(){w().then((function(t){e(t)}))}),[e]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(y,{}),Object(o.jsx)(m,{}),Object(o.jsx)(i,{}),Object(o.jsx)(Z,{})]})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,35)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(b,{children:Object(o.jsx)(h.a,{children:Object(o.jsx)(_,{})})})}),document.getElementById("root")),X()}],[[34,1,2]]]);
//# sourceMappingURL=main.59d23b9a.chunk.js.map